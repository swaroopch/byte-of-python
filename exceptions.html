
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Exceptions Â· A Byte of Python</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.0.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="stdlib.html" />
    
    
    <link rel="prev" href="io.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="dedication.html">
            
                <a href="dedication.html">
            
                    
                    Dedication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="preface.html">
            
                <a href="preface.html">
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="about_python.html">
            
                <a href="about_python.html">
            
                    
                    About Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="installation.html">
            
                <a href="installation.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="first_steps.html">
            
                <a href="first_steps.html">
            
                    
                    First Steps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="basics.html">
            
                <a href="basics.html">
            
                    
                    Basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="op_exp.html">
            
                <a href="op_exp.html">
            
                    
                    Operators and Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="control_flow.html">
            
                <a href="control_flow.html">
            
                    
                    Control flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="functions.html">
            
                <a href="functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="modules.html">
            
                <a href="modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="data_structures.html">
            
                <a href="data_structures.html">
            
                    
                    Data Structures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="problem_solving.html">
            
                <a href="problem_solving.html">
            
                    
                    Problem Solving
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="oop.html">
            
                <a href="oop.html">
            
                    
                    Object Oriented Programming
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="io.html">
            
                <a href="io.html">
            
                    
                    Input and Output
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.16" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    Exceptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="stdlib.html">
            
                <a href="stdlib.html">
            
                    
                    Standard Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="more.html">
            
                <a href="more.html">
            
                    
                    More
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="what_next.html">
            
                <a href="what_next.html">
            
                    
                    What Next
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="floss.html">
            
                <a href="floss.html">
            
                    
                    Appendix: FLOSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="about.html">
            
                <a href="about.html">
            
                    
                    Appendix: About
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="revision_history.html">
            
                <a href="revision_history.html">
            
                    
                    Appendix: Revision History
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="translations.html">
            
                <a href="translations.html">
            
                    
                    Appendix: Translations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="translation_howto.html">
            
                <a href="translation_howto.html">
            
                    
                    Appendix: Translation How-to
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="feedback.html">
            
                <a href="feedback.html">
            
                    
                    Feedback
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Exceptions</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="exceptions">Exceptions</h1>
<p>Exceptions occur when <em>exceptional</em> situations occur in your program. For example, what if you are going to read a file and the file does not exist? Or what if you accidentally deleted it when the program was running? Such situations are handled using <strong>exceptions</strong>.</p>
<p>Similarly, what if your program had some invalid statements? This is handled by Python which <strong>raises</strong> its hands and tells you there is an <strong>error</strong>.</p>
<h2 id="errors">Errors</h2>
<p>Consider a simple <code>print</code> function call. What if we misspelt <code>print</code> as <code>Print</code>? Note the capitalization. In this case, Python <em>raises</em> a syntax error.</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>Print(<span class="hljs-string">"Hello World"</span>)
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
NameError: name <span class="hljs-string">'Print'</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello World"</span>)
Hello World
</code></pre>
<p>Observe that a <code>NameError</code> is raised and also the location where the error was detected is printed. This is what an <strong>error handler</strong> for this error does.</p>
<h2 id="exceptions">Exceptions</h2>
<p>We will <strong>try</strong> to read input from the user.  Enter the first line below and hit the <code>Enter</code> key.  When your computer prompts you for input, instead press <code>[ctrl-d]</code> on a Mac or <code>[ctrl-z]</code> with Windows and see what happens.  (If you're using Windows and neither option works, you can try <code>[ctrl-c]</code> in the Command Prompt to generate a KeyboardInterrupt error instead).</p>
<pre><code class="lang-python"><span class="hljs-meta">&gt;&gt;&gt; </span>s = <span class="hljs-built_in">input</span>(<span class="hljs-string">'Enter something --&gt; '</span>)
Enter something --&gt; Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
EOFError
</code></pre>
<p>Python raises an error called <code>EOFError</code> which basically means it found an <em>end of file</em> symbol (which is represented by <code>ctrl-d</code>) when it did not expect to see it.</p>
<h2 id="handling-exceptions">Handling Exceptions</h2>
<p>We can handle exceptions using the <code>try..except</code> statement.  We basically put our usual statements within the try-block and put all our error handlers in the except-block.</p>
<p>Example (save as <code>exceptions_handle.py</code>):</p>
<pre><code class="lang-python"><span class="hljs-keyword">try</span>:
    text = <span class="hljs-built_in">input</span>(<span class="hljs-string">'Enter something --&gt; '</span>)
<span class="hljs-keyword">except</span> EOFError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Why did you do an EOF on me?'</span>)
<span class="hljs-keyword">except</span> KeyboardInterrupt:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'You cancelled the operation.'</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'You entered {}'</span>.<span class="hljs-built_in">format</span>(text))
</code></pre>

<p>Output:</p>
<pre><code># Press ctrl + d
$ python exceptions_handle.py
Enter something --&gt; Why did you do an EOF on me?

# Press ctrl + c
$ python exceptions_handle.py
Enter something --&gt; ^CYou cancelled the operation.

$ python exceptions_handle.py
Enter something --&gt; No exceptions
You entered No exceptions
</code></pre>

<p><strong>How It Works</strong></p>
<p>We put all the statements that might raise exceptions/errors inside the <code>try</code> block and then put handlers for the appropriate errors/exceptions in the <code>except</code> clause/block. The <code>except</code> clause can handle a single specified error or exception, or a parenthesized list of errors/exceptions. If no names of errors or exceptions are supplied, it will handle <em>all</em> errors and exceptions.</p>
<p>Note that there has to be at least one <code>except</code> clause associated with every <code>try</code> clause. Otherwise, what's the point of having a try block?</p>
<p>If any error or exception is not handled, then the default Python handler is called which just stops the execution of the program and prints an error message. We have already seen this in action above.</p>
<p>You can also have an <code>else</code> clause associated with a <code>try..except</code> block. The <code>else</code> clause is executed if no exception occurs.</p>
<p>In the next example, we will also see how to get the exception object so that we can retrieve additional information.</p>
<h2 id="raising-exceptions">Raising Exceptions</h2>
<p>You can <em>raise</em> exceptions using the <code>raise</code> statement by providing the name of the error/exception and the exception object that is to be <em>thrown</em>.</p>
<p>The error or exception that you can raise should be a class which directly or indirectly must be a derived class of the <code>Exception</code> class.</p>
<p>Example (save as <code>exceptions_raise.py</code>):</p>
<pre><code class="lang-python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShortInputException</span>(<span class="hljs-title class_ inherited__">Exception</span>):
    <span class="hljs-string">'''A user-defined exception class.'''</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, length, atleast</span>):
        Exception.__init__(<span class="hljs-variable language_">self</span>)
        <span class="hljs-variable language_">self</span>.length = length
        <span class="hljs-variable language_">self</span>.atleast = atleast

<span class="hljs-keyword">try</span>:
    text = <span class="hljs-built_in">input</span>(<span class="hljs-string">'Enter something --&gt; '</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(text) &lt; <span class="hljs-number">3</span>:
        <span class="hljs-keyword">raise</span> ShortInputException(<span class="hljs-built_in">len</span>(text), <span class="hljs-number">3</span>)
    <span class="hljs-comment"># Other work can continue as usual here</span>
<span class="hljs-keyword">except</span> EOFError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Why did you do an EOF on me?'</span>)
<span class="hljs-keyword">except</span> ShortInputException <span class="hljs-keyword">as</span> ex:
    <span class="hljs-built_in">print</span>((<span class="hljs-string">'ShortInputException: The input was '</span> +
           <span class="hljs-string">'{0} long, expected at least {1}'</span>)
          .<span class="hljs-built_in">format</span>(ex.length, ex.atleast))
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'No exception was raised.'</span>)
</code></pre>

<p>Output:</p>
<pre><code>$ python exceptions_raise.py
Enter something --&gt; a
ShortInputException: The input was 1 long, expected at least 3

$ python exceptions_raise.py
Enter something --&gt; abc
No exception was raised.
</code></pre>

<p><strong>How It Works</strong></p>
<p>Here, we are creating our own exception type. This new exception type is called <code>ShortInputException</code>. It has two fields - <code>length</code> which is the length of the given input, and <code>atleast</code> which is the minimum length that the program was expecting.</p>
<p>In the <code>except</code> clause, we mention the class of error which will be stored <code>as</code> the variable name to hold the corresponding error/exception object. This is analogous to parameters and arguments in a function call. Within this particular <code>except</code> clause, we use the <code>length</code> and <code>atleast</code> fields of the exception object to print an appropriate message to the user.</p>
<h2 id="try-finally">Try ... Finally </h2>
<p>Suppose you are reading a file in your program. How do you ensure that the file object is closed properly whether or not an exception was raised? This can be done using the <code>finally</code> block.</p>
<p>Save this program as <code>exceptions_finally.py</code>:</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> time

f = <span class="hljs-literal">None</span>
<span class="hljs-keyword">try</span>:
    f = <span class="hljs-built_in">open</span>(<span class="hljs-string">"poem.txt"</span>)
    <span class="hljs-comment"># Our usual file-reading idiom</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        line = f.readline()
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(line) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">break</span>
        <span class="hljs-built_in">print</span>(line, end=<span class="hljs-string">''</span>)
        sys.stdout.flush()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Press ctrl+c now"</span>)
        <span class="hljs-comment"># To make sure it runs for a while</span>
        time.sleep(<span class="hljs-number">2</span>)
<span class="hljs-keyword">except</span> IOError:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Could not find file poem.txt"</span>)
<span class="hljs-keyword">except</span> KeyboardInterrupt:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"!! You cancelled the reading from the file."</span>)
<span class="hljs-keyword">finally</span>:
    <span class="hljs-keyword">if</span> f:
        f.close()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"(Cleaning up: Closed the file)"</span>)
</code></pre>

<p>Output:</p>
<pre><code>$ python exceptions_finally.py
Programming is fun
Press ctrl+c now
^C!! You cancelled the reading from the file.
(Cleaning up: Closed the file)
</code></pre>

<p><strong>How It Works</strong></p>
<p>We do the usual file-reading stuff, but we have arbitrarily introduced sleeping for 2 seconds after printing each line using the <code>time.sleep</code> function so that the program runs slowly (Python is very fast by nature). When the program is still running, press <code>ctrl + c</code> to interrupt/cancel the program.</p>
<p>Observe that the <code>KeyboardInterrupt</code> exception is thrown and the program quits. However, before the program exits, the finally clause is executed and the file object is always closed.</p>
<p>Notice that a variable assigned a value of 0 or <code>None</code> or a variable which is an empty sequence or collection is considered <code>False</code> by Python.  This is why we can use <code>if f:</code> in the code above.</p>
<p>Also note that we use <code>sys.stdout.flush()</code> after <code>print</code> so that it prints to the screen immediately.</p>
<h2 id="with">The with statement </h2>
<p>Acquiring a resource in the <code>try</code> block and subsequently releasing the resource in the <code>finally</code> block is a common pattern. Hence, there is also a <code>with</code> statement that enables this to be done in a clean manner:</p>
<p>Save as <code>exceptions_using_with.py</code>:</p>
<pre><code class="lang-python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"poem.txt"</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:
        <span class="hljs-built_in">print</span>(line, end=<span class="hljs-string">''</span>)
</code></pre>

<p><strong>How It Works</strong></p>
<p>The output should be same as the previous example. The difference here is that we are using the <code>open</code> function with the <code>with</code> statement - we leave the closing of the file to be done automatically by <code>with open</code>.</p>
<p>What happens behind the scenes is that there is a protocol used by the <code>with</code> statement. It fetches the object returned by the <code>open</code> statement, let's call it "thefile" in this case.</p>
<p>It <em>always</em> calls the <code>thefile.__enter__</code> function before starting the block of code under it and <em>always</em> calls <code>thefile.__exit__</code> after finishing the block of code.</p>
<p>So the code that we would have written in a <code>finally</code> block should be taken care of automatically by the <code>__exit__</code> method. This is what helps us to avoid having to use explicit <code>try..finally</code> statements repeatedly.</p>
<p>More discussion on this topic is beyond scope of this book, so please refer <a href="http://www.python.org/dev/peps/pep-0343/" target="_blank">PEP 343</a> for a comprehensive explanation.</p>
<h2 id="summary">Summary</h2>
<p>We have discussed the usage of the <code>try..except</code> and <code>try..finally</code> statements. We have seen how to create our own exception types and how to raise exceptions as well.</p>
<p>Next, we will explore the Python Standard Library.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="io.html" class="navigation navigation-prev " aria-label="Previous page: Input and Output">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="stdlib.html" class="navigation navigation-next " aria-label="Next page: Standard Library">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Exceptions","level":"1.16","depth":1,"next":{"title":"Standard Library","level":"1.17","depth":1,"path":"stdlib.md","ref":"stdlib.md","articles":[]},"previous":{"title":"Input and Output","level":"1.15","depth":1,"path":"io.md","ref":"io.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"authorUrl":"https://swaroopch.com/about/","buyBookUrl":"https://swaroopch.com/buybook/","contactUrl":"https://swaroopch.com/contact/","downloadUrl":"https://github.com/swaroopch/byte-of-python/releases/latest","officialUrl":"https://python.swaroopch.com","pythonVersion":"3.6.0","sourceUrl":"https://github.com/swaroopch/byte-of-python","vimBookUrl":"https://vim.swaroopch.com/"},"title":"A Byte of Python","gitbook":"*"},"file":{"path":"exceptions.md","mtime":"2025-08-17T16:14:54.580Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-08-17T16:15:06.963Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

